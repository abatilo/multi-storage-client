#
# Just configuration for multi-storage-explorer frontend.
#
# https://just.systems/man/en
#

# Output directory for built assets
output-dir := "../multi-storage-client/src/multistorageclient/explorer/static"

# List recipes.
help:
    just --list

# Install npm dependencies.
install:
    npm ci

# Start development server (port 5175, proxies API to localhost:8888).
start-frontend: install
    npm run dev

# Start the backend server for development
start-backend:
    just ../multi-storage-client/start-explorer

# Run ESLint.
lint: install
    npm run lint

# Fix ESLint issues.
lint-fix: install
    npm run lint:fix

# Run frontend unit tests.
test: install
    npm run test

# Run tests with coverage report.
test-coverage: install
    npm run test:coverage

# Build production assets to backend static directory.
build: install lint test
    npm run build
    @echo "Frontend assets built to {{output-dir}}"

# Clean all build artifacts.
clean:
    rm -rf node_modules
    rm -rf {{output-dir}}/*
    @echo "Cleaned build artifacts"
